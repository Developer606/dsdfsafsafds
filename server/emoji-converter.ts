import { type Character } from "@shared/characters";

// Comprehensive emoji mapping for actions and expressions found inside asterisks
// This helps convert text descriptions to actual emojis
const emojiMap: Record<string, string> = {
  // Basic emotions and actions
  "smile": "ðŸ˜Š",
  "grin": "ðŸ˜",
  "laugh": "ðŸ˜‚",
  "joy": "ðŸ˜„",
  "sigh": "ðŸ˜”",
  "sad": "ðŸ˜¢",
  "cry": "ðŸ˜¢",
  "tears": "ðŸ˜­",
  "sob": "ðŸ˜­",
  "angry": "ðŸ˜ ",
  "mad": "ðŸ˜¡",
  "furious": "ðŸ¤¬",
  "frown": "ðŸ™",
  "worried": "ðŸ˜Ÿ",
  "nervous": "ðŸ˜¬",
  "anxious": "ðŸ˜°",
  "scared": "ðŸ˜¨",
  "terrified": "ðŸ˜±",
  "confused": "ðŸ˜•",
  "surprised": "ðŸ˜®",
  "shocked": "ðŸ˜²",
  "amazed": "ðŸ˜²",
  "disappointed": "ðŸ˜ž",
  "relieved": "ðŸ˜Œ",
  "satisfied": "ðŸ˜Œ",
  "sleepy": "ðŸ˜´",
  "tired": "ðŸ˜«",
  "exhausted": "ðŸ˜©",
  "yawn": "ðŸ¥±",
  "blush": "ðŸ˜Š",
  "embarrassed": "ðŸ˜³",
  "thinking": "ðŸ¤”",
  "thoughtful": "ðŸ¤”",
  "neutral": "ðŸ˜",
  "indifferent": "ðŸ˜",
  "rolling eyes": "ðŸ™„",
  "eye roll": "ðŸ™„",
  "wink": "ðŸ˜‰",
  "smirk": "ðŸ˜",
  "tongue": "ðŸ˜›",
  "tongue out": "ðŸ˜‹",
  "drool": "ðŸ¤¤",
  "excited": "ðŸ¤©",
  "heart eyes": "ðŸ˜",
  "love": "â¤ï¸",
  "heart": "â¤ï¸",
  "thumbs up": "ðŸ‘",
  "thumbs down": "ðŸ‘Ž",
  "clap": "ðŸ‘",
  "shrug": "ðŸ¤·",
  "face palm": "ðŸ¤¦",
  "facepalm": "ðŸ¤¦",
  "sweat": "ðŸ˜…",
  "sweet": "ðŸ¥°",
  "hug": "ðŸ¤—",
  
  // Head movements
  "nods slowly": "ðŸ‘",
  "nods enthusiastically": "ðŸ˜€ðŸ‘",
  "shakes head": "ðŸ™…â€â™‚ï¸",
  "shrugs helplessly": "ðŸ¤·",
  "throws hands up": "ðŸ™Œ",
  "slaps forehead": "ðŸ¤¦",
  "facepalms hard": "ðŸ¤¦â€â™‚ï¸",
  "sighs deeply": "ðŸ˜®â€ðŸ’¨",
  "gasps audibly": "ðŸ˜²",
  "inhales sharply": "ðŸ˜§",
  "holds chest": "ðŸ«€",
  "clutches pearls": "ðŸ˜±",
  "stares blankly": "ðŸ˜",
  "raises eyebrow": "ðŸ¤¨",
  "furrows brows": "ðŸ˜ ",
  "squints slightly": "ðŸ§",
  "narrows eyes": "ðŸ˜’",
  "widens eyes": "ðŸ˜³",
  "eyes dart around": "ðŸ‘€",
  "shifts uncomfortably": "ðŸ˜¬",
  "looks around nervously": "ðŸ˜Ÿ",
  "bites lip": "ðŸ˜¬",
  "taps foot": "ðŸ‘Ÿ",
  "bounces knee": "ðŸ¦µ",
  "folds arms": "ðŸ˜¤",
  "crosses arms": "ðŸ™…â€â™€ï¸",
  "tilts head": "ðŸ¤”",
  "tilts head confusedly": "ðŸ˜•",
  "smirks": "ðŸ˜",
  "pouts": "ðŸ˜¢",
  
  // Advanced actions
  "presses lips together": "ðŸ˜¶",
  "grins mischievously": "ðŸ˜",
  "twirls mustache": "ðŸ§",
  "looks innocent": "ðŸ˜‡",
  "pretends not to know": "ðŸ¤¥",
  "acts surprised": "ðŸ˜²",
  "acts offended": "ðŸ˜¤",
  "acts clueless": "ðŸ˜¶",
  "acts cool": "ðŸ˜Ž",
  "acts dramatic": "ðŸŽ­",
  "acts suspicious": "ðŸ•µï¸",
  "side-eyes": "ðŸ‘€",
  "deadpans": "ðŸ˜",
  "monologues": "ðŸŽ™ï¸",
  "narrates": "ðŸ“–",
  "commentates": "ðŸŽ¤",
  "breaks fourth wall": "ðŸªž",
  "narrates dramatically": "ðŸŽ¬",
  "voice cracks": "ðŸ«¨",
  "clears throat": "ðŸ˜¬",
  "adjusts tie": "ðŸ‘”",
  "adjusts hat": "ðŸŽ©",
  "fixes hair": "ðŸ’‡",
  "reapplies makeup": "ðŸ’„",
  "checks reflection": "ðŸªž",
  "pops collar": "ðŸ˜Ž",
  "struts": "ðŸ•º",
  "poses for camera": "ðŸ“¸",
  "strikes pose": "ðŸ’ƒ",
  "does peace sign": "âœŒï¸",
  "throws gang sign": "ðŸ«°",
  "salutes stiffly": "ðŸ«¡",
  "waves dramatically": "ðŸ‘‹",
  "nods curtly": "ðŸ™ƒ",
  "glances quickly": "ðŸ‘€",
  "squints suspiciously": "ðŸ§",
  "glowers": "ðŸ˜ ",
  "glances knowingly": "ðŸ˜",
  "winks slyly": "ðŸ˜‰",
  "twirls finger": "ðŸ”„",
  "cracks fingers": "âœ‹",
  "pats back": "ðŸ¤—",
  "rubs back": "ðŸ’†",
  "hugs tightly": "ðŸ¤—",
  "grabs hand": "âœ‹",
  "holds hands": "ðŸ¤",
  "shakes hands": "ðŸ¤",
  
  // Phone and tech related
  "stares at phone": "ðŸ“±ðŸ‘€",
  "checks clock again": "â°ðŸ˜©",
  "scrolls endlessly": "ðŸ“±ðŸŒ€",
  "accidentally likes post": "ðŸ˜³â¤ï¸",
  "deletes comment quickly": "ðŸ«£ðŸ—‘ï¸",
  "creeps on profile": "ðŸ•µï¸â€â™‚ï¸ðŸ“¸",
  "lurks in comments": "ðŸ‘€ðŸ’¬",
  "starts typing": "ðŸ’¬âŒ¨ï¸",
  "types then stops": "âœï¸â¸ï¸",
  "leaves on read": "ðŸ˜ðŸ“±",
  "reads message instantly": "âš¡ðŸ“¨",
  "sends too many emojis": "ðŸ˜‚ðŸ”¥ðŸ’¯ðŸ˜©ðŸ˜­",
  "updates status": "ðŸ—£ï¸ðŸ†•",
  "changes pfp": "ðŸ§‘â€ðŸŽ¨",
  "downloads meme": "ðŸ–¼ï¸ðŸ˜†",
  "reposts with caption": "ðŸ”ðŸ“",
  "makes meme": "ðŸŽ¨ðŸ§ ",
  "gets ratioed": "ðŸ“‰",
  "wins argument online": "ðŸ§ ðŸ†",
  "loses debate": "ðŸ˜¬ðŸ’¢",
  "posts hot take": "ðŸ”¥ðŸ¤”",
  "edits post quickly": "âœï¸ðŸ’¨",
  "deletes everything": "ðŸ§¹ðŸ—‘ï¸",
  "starts new account": "ðŸ†•ðŸ“±",
  "logs out dramatically": "ðŸ‘‹ðŸ“´",
  "swipes left": "ðŸ‘ˆâŒ",
  "swipes right": "ðŸ‘‰ðŸ’˜",
  "gets a match": "ðŸ’˜ðŸ”",
  "sends pickup line": "ðŸ˜ðŸ’¬",
  "gets left on seen": "ðŸ˜”ðŸ‘€",
  "tries again anyway": "ðŸ˜¤ðŸ’¬",
  "gets blocked": "ðŸš«",
  
  // Additional actions and reactions
  "puffs up cheeks": "ðŸ˜—",
  "makes a face": "ðŸ˜",
  "sticks tongue out": "ðŸ˜›",
  "winks playfully": "ðŸ˜‰",
  "licks teeth": "ðŸ˜‹",
  "smacks lips": "ðŸ˜š",
  "clicks tongue disapprovingly": "ðŸ™„",
  "snaps gum": "ðŸ˜",
  "chews slowly": "ðŸ˜¬",
  "sips tea": "ðŸµ",
  "sips dramatically": "ðŸ«–ðŸ‘€",
  "drinks slowly": "ðŸ§ƒ",
  "spits out drink": "ðŸ¤¯ðŸ¥¤",
  "chokes on water": "ðŸ˜µðŸ’¦",
  "coughs loudly": "ðŸ˜¤",
  "bursts out laughing": "ðŸ¤£",
  "cackles": "ðŸ§™â€â™€ï¸",
  "laughs maniacally": "ðŸ˜ˆ",
  "laughs nervously": "ðŸ˜…",
  "giggles nervously": "ðŸ¤­",
  "snorts": "ðŸ˜¤",
  "screams internally": "ðŸ˜«",
  "screams externally": "ðŸ˜±",
  "shouts": "ðŸ“¢",
  "yells angrily": "ðŸ˜¡",
  "howls": "ðŸº",
  "growls lowly": "ðŸ˜ ",
  "huffs": "ðŸ˜¤",
  "snarls quietly": "ðŸ˜¾",
  "stomps foot": "ðŸ˜¡",
  "throws a fit": "ðŸ˜«",
  "melts down": "ðŸ« ",
  "whimpers": "ðŸ˜¢",
  "cries softly": "ðŸ˜¿",
  "sobs loudly": "ðŸ˜­",
  "screeches": "ðŸ˜«",
  "wails": "ðŸ˜©",
  "groans": "ðŸ˜–",
  "moans dramatically": "ðŸ«¥",
  "grumbles": "ðŸ˜ ",
  "mutters under breath": "ðŸ˜¤",
  "talks to self": "ðŸ§ ðŸ’¬",
  "mumbles": "ðŸ˜",
  "grits out words": "ðŸ˜¤",
  "stutters": "ðŸ˜¬",
  "trails off": "ðŸ’­",
  "changes subject": "ðŸ”€",
  "deflects": "ðŸ›¡ï¸",
  "redirects conversation": "ðŸ”„",
  "ghosts conversation": "ðŸ‘»",
  "blocks user": "ðŸš«",
  "unfollows": "âŒ",
  
  // Social media & Gaming
  "streams on twitch": "ðŸŽ¥ðŸ’œ",
  "gets one viewer": "ðŸ‘ï¸",
  "talks to self on stream": "ðŸ—£ï¸ðŸ“º",
  "gets raided": "ðŸšªðŸ‘¥",
  "mod bans troll": "ðŸ”¨ðŸ™…",
  "chat spams pog": "ðŸ—¨ï¸ðŸ”¥",
  "drops emotes": "ðŸ˜ŽðŸŽ‰",
  "hits sub goal": "ðŸŽ‰ðŸŽ¯",
  "starts giveaway": "ðŸŽðŸŽŠ",
  "forgets camera on": "ðŸ˜³ðŸ“·",
  "mic peaks": "ðŸ”ŠðŸ˜©",
  "gets clip of the day": "âœ‚ï¸ðŸ“½ï¸",
  "uploads highlight": "ðŸŒŸðŸŽžï¸",
  "posts to YouTube": "â–¶ï¸ðŸ“¹",
  "edits thumbnail": "ðŸ–¼ï¸âœ¨",
  "clickbaits hard": "ðŸªðŸ˜†",
  "gets views": "ðŸ‘€ðŸ”¥",
  "reads comments": "ðŸ’¬ðŸ“±",
  "regrets immediately": "ðŸ˜ðŸ”™",
  "turns off replies": "ðŸš«ðŸ’¬",
  
  // Additional expressions
  "chuckles to self": "ðŸ˜",
  "laughs softly": "ðŸ˜Š",
  "giggles behind hand": "ðŸ¤­",
  "laughs loudly": "ðŸ˜‚",
  "wheezes laughing": "ðŸ˜†",
  "loses it": "ðŸ¤£",
  "wipes tear from eye": "ðŸ˜¢",
  "tears up": "ðŸ˜¢",
  "bawls": "ðŸ˜­",
  "cries laughing": "ðŸ˜‚ðŸ˜­",
  "bites knuckle": "ðŸ˜¬",
  "gnashes teeth": "ðŸ˜ ",
  "smashes keyboard": "ðŸ˜¤âŒ¨ï¸",
  "throws chair": "ðŸ’ºðŸ’¥",
  "rages": "ðŸ˜¡",
  "stomps away": "ðŸ‘£",
  "walks off": "ðŸš¶â€â™‚ï¸",
  "storms out": "ðŸŒ©ï¸",
  "slams door behind": "ðŸšªðŸ’¥",
  "locks door": "ðŸ”’",
  "bars window": "ðŸªŸðŸ”’",
  "builds wall": "ðŸ§±",
  "puts up shield": "ðŸ›¡ï¸",
  "raises defenses": "ðŸ§±ðŸ›¡ï¸",
  "hides behind wall": "ðŸ«£",
  "ducks behind cover": "ðŸ§",
  "peeks out cautiously": "ðŸ‘€",
  "emerges slowly": "ðŸ˜¶â€ðŸŒ«ï¸",
  "tiptoes": "ðŸ¾",
  "creeps slowly": "ðŸ«£",
  "sneaks in": "ðŸ•µï¸â€â™‚ï¸",
  "sneaks out": "ðŸ•µï¸",
  "vanishes quietly": "ðŸŒ«ï¸",
  "disappears in silence": "ðŸ¤«",
  "leaves note behind": "ðŸ“",
  "writes quickly": "âœï¸",
  "scribbles": "ðŸ“",
  "draws heart": "â¤ï¸",
  "writes love letter": "ðŸ’Œ",
  "sends text": "ðŸ“±",
  "spams emojis": "ðŸ˜ðŸ˜ŽðŸ˜‚ðŸ”¥",
  "types nervously": "ðŸ§‘â€ðŸ’»",
  "deletes message": "âŒ",
  "unsends": "âª",
  "ghosts": "ðŸ‘»",
  "left on read": "ðŸ¥²",
  "double texts": "ðŸ“±ðŸ“±",
  "waits for reply": "â³",
  "refreshes chat": "ðŸ”",
  "posts meme": "ðŸ¸",
  "shares gif": "ðŸŽžï¸",
  "reacts with emoji": "ðŸ˜†ðŸ‘â¤ï¸",
  "spams reactions": "ðŸ”¥ðŸ”¥ðŸ”¥",
  "screenshots": "ðŸ“¸",
  "saves pic": "ðŸ’¾",
  "zooms in": "ðŸ”",
  "zooms out": "ðŸ”­",
  "enhances image": "ðŸ•µï¸â€â™‚ï¸",
  "analyzes photo": "ðŸ§ ",
  "solves puzzle": "ðŸ§©",
  "decodes message": "ðŸ”",
  "cracks code": "ðŸ§‘â€ðŸ’»",
  "finds clue": "ðŸ•µï¸â€â™€ï¸",
  "gets idea": "ðŸ’¡",
  "lightbulb moment": "ðŸ’¡âœ¨",
  "face lights up": "ðŸ˜ƒ",
  "eyes sparkle": "âœ¨ðŸ‘ï¸",
  "starts brainstorming": "ðŸ¤¯",
  "thinks really hard": "ðŸ§ ðŸ’¥",
  "explains quickly": "ðŸ’¬",
  "talks fast": "ðŸ˜®â€ðŸ’¨",
  "talks too much": "ðŸ˜…",
  "talks over others": "ðŸ˜¬",
  "gets ignored": "ðŸ˜",
  "gets interrupted": "ðŸ˜‘",
  "gets cut off": "âœ‚ï¸",
  "shuts down": "ðŸ”‡",
  "walks away silently": "ðŸš¶â€â™‚ï¸ðŸ˜¶",
  "vanishes mid sentence": "ðŸ’¨",
  "breaks into song": "ðŸŽ¤ðŸŽ¶",
  "starts beatboxing": "ðŸ¥",
  "plays air guitar": "ðŸŽ¸",
  "plays air drums": "ðŸ¥",
  "starts dancing": "ðŸ’ƒ",
  "does happy dance": "ðŸ•º",
  "breakdances": "ðŸŒ€",
  "moonwalks": "ðŸŒðŸ‘£",
  "headbangs": "ðŸ¤˜",
  "throws hands up in joy": "ðŸ™Œ",
  "throws confetti": "ðŸŽŠ",
  "celebrates": "ðŸŽ‰",
  "pops champagne": "ðŸ¾",
  "makes toast": "ðŸ¥‚",
  "raises glass": "ðŸ·",
  "clinks glasses": "ðŸ¥‚",
  "starts party": "ðŸª©",
  "turns up volume": "ðŸ”Š",
  "blasts music": "ðŸ”¥ðŸŽ¶",
  "covers face with pillow": "ðŸ˜©ðŸ›ï¸",
  "hides under blanket": "ðŸ˜´ðŸ›Œ",
  "pretends to sleep": "ðŸ«£",
  "actually falls asleep": "ðŸ˜´",
  "snores loudly": "ðŸ’¤",
  "dreams vividly": "ðŸ’­ðŸŒˆ",
  "has nightmare": "ðŸ˜±",
  "wakes up suddenly": "ðŸ˜³",
  "blinks sleepily": "ðŸ˜ª",
  "yawns": "ðŸ¥±",
  "stretches arms overhead": "ðŸ™†",
  "drags feet": "ðŸ˜©",
  "makes coffee": "â˜•",
  "spills coffee": "â˜•ðŸ’¥",
  "burns tongue": "ðŸ”¥ðŸ‘…",
  "rushes out door": "ðŸƒâ€â™‚ï¸ðŸšª",
  "misses bus": "ðŸšŒðŸ’¨",
  "runs late": "â°ðŸ˜±",
  "curses under breath": "ðŸ¤¬",
  "throws bag over shoulder": "ðŸŽ’",
  "slams locker": "ðŸ§°ðŸ’¥",
  "punches wall": "ðŸ‘ŠðŸ§±",
  "breaks pencil": "âœï¸ðŸ’¢",
  "throws paper ball": "ðŸ—‘ï¸",
  "scribbles angrily": "âœï¸ðŸ˜ ",
  "doodles": "âœï¸ðŸŽ¨"
};

/**
 * Converts text enclosed in asterisks to appropriate emojis
 * @param text Text that may contain expressions in asterisks
 * @returns Text with asterisk expressions converted to emojis
 */
export function convertAsteriskTextToEmojis(text: string): string {
  // Regular expression to match text inside asterisks: *text*
  const asteriskPattern = /\*([^*]+)\*/g;
  
  return text.replace(asteriskPattern, (match, textInsideAsterisks) => {
    // Convert to lowercase for matching
    const lowerCaseText = textInsideAsterisks.toLowerCase().trim();
    
    // Check if there's a matching emoji in our map
    for (const [expression, emoji] of Object.entries(emojiMap)) {
      if (lowerCaseText.includes(expression)) {
        return emoji; // Replace with appropriate emoji
      }
    }
    
    // If no match found, keep the original text but remove asterisks
    return textInsideAsterisks;
  });
}