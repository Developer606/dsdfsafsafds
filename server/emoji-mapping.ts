// Emoji mappings for expressions
// Maps text expressions to their emoji equivalents
export const expressionToEmojiMap: Record<string, string> = {
  // Basic expressions
  "*nods*": "ğŸ‘",
  "*shakes head*": "ğŸ™…",
  "*laughs*": "ğŸ˜‚",
  "*laughs softly*": "ğŸ˜Š",
  "*laughs nervously*": "ğŸ˜…",
  "*giggles*": "ğŸ˜„",
  "*snorts*": "ğŸ˜†",
  "*smirks*": "ğŸ˜",
  "*grins*": "ğŸ˜",
  "*grins sheepishly*": "ğŸ˜…",
  "*smiles warmly*": "ğŸ™‚",
  "*smiles sadly*": "ğŸ˜”",
  "*smiles weakly*": "ğŸ˜•",
  "*frowns*": "â˜¹ï¸",
  "*pouts*": "ğŸ˜",
  "*gasps*": "ğŸ˜¯",
  "*gasps loudly*": "ğŸ˜²",
  "*sighs*": "ğŸ˜”",
  "*sniffs*": "ğŸ¤§",
  "*sneezes*": "ğŸ¤§",
  "*coughs*": "ğŸ˜·",
  "*yawns*": "ğŸ¥±",
  "*cries*": "ğŸ˜¢",
  "*sobs*": "ğŸ˜­",
  "*wails*": "ğŸ˜©",
  "*whimpers*": "ğŸ˜Ÿ",
  "*gulps*": "ğŸ˜°",
  "*winces*": "ğŸ˜£",
  "*grimaces*": "ğŸ˜¬",
  "*groans*": "ğŸ˜©",
  "*moans*": "ğŸ˜«",
  "*screams*": "ğŸ˜±",
  "*shrieks*": "ğŸ˜¨",
  "*gasps dramatically*": "ğŸ˜§",
  "*stares*": "ğŸ‘€",
  "*stares blankly*": "ğŸ˜",
  "*stares in shock*": "ğŸ˜²",
  "*narrows eyes*": "ğŸ˜’",
  "*glares*": "ğŸ˜ ",
  "*squints*": "ğŸ˜‘",
  "*rolls eyes*": "ğŸ™„",
  "*raises eyebrow*": "ğŸ¤¨",
  "*arches brow*": "ğŸ¤”",
  "*tilts head*": "ğŸ¤”",
  "*cocks head*": "ğŸ§",
  "*nods slowly*": "ğŸ‘Œ",
  "*shrugs*": "ğŸ¤·",
  "*facepalms*": "ğŸ¤¦",
  "*holds head in hands*": "ğŸ¤¯",
  "*rubs temples*": "ğŸ˜£",
  "*covers face*": "ğŸ˜–",
  "*scrunches up face*": "ğŸ˜•",
  "*looks confused*": "ğŸ˜•",
  "*looks surprised*": "ğŸ˜®",
  "*looks scared*": "ğŸ˜¨",
  "*looks amused*": "ğŸ˜„",
  "*looks unimpressed*": "ğŸ˜‘",
  "*looks skeptical*": "ğŸ§",
  "*looks annoyed*": "ğŸ˜’",
  "*looks angry*": "ğŸ˜ ",
  "*looks disappointed*": "ğŸ˜",
  "*looks hopeful*": "ğŸ¤",
  "*looks excited*": "ğŸ˜ƒ",
  "*looks embarrassed*": "ğŸ˜³",
  "*blushes*": "ğŸ˜Š",
  "*turns red*": "ğŸ˜³",
  "*giggles nervously*": "ğŸ˜…",
  "*covers mouth*": "ğŸ¤­",
  "*waves*": "ğŸ‘‹",
  "*waves shyly*": "ğŸ‘‹",
  "*gives thumbs up*": "ğŸ‘",
  "*gives thumbs down*": "ğŸ‘",
  "*claps*": "ğŸ‘",
  "*cheers*": "ğŸ‰",
  "*jumps*": "ğŸ•´ï¸",
  "*dances*": "ğŸ’ƒ",
  "*bows*": "ğŸ™‡",
  "*salutes*": "ğŸ«¡",
  "*points*": "ğŸ‘‰",
  "*points at self*": "ğŸ™‹",
  "*raises hand*": "âœ‹",
  "*lowers hand*": "ğŸ¤š",
  "*holds up hand*": "âœ‹",
  "*crosses arms*": "ğŸ˜’",
  "*folds arms*": "ğŸ˜‘",
  "*puts hands on hips*": "ğŸ˜¤",
  "*shrugs helplessly*": "ğŸ¤·",
  "*nods eagerly*": "ğŸ˜ƒ",
  "*nods solemnly*": "ğŸ˜”",
  "*shakes head slowly*": "ğŸ˜",
  "*taps foot*": "ğŸ¦¶",
  "*stomps*": "ğŸ˜ ",
  "*paces*": "ğŸ§â€â™‚ï¸",
  "*sits down*": "ğŸª‘",
  "*stands up*": "ğŸ§",
  "*leans back*": "ğŸ˜Œ",
  "*leans forward*": "ğŸ§",
  "*tilts head in confusion*": "ğŸ¤”",
  "*fidgets*": "ğŸ«¨",
  "*bites lip*": "ğŸ˜¬",
  "*chews nails*": "ğŸ˜¬",
  "*scratches head*": "ğŸ¤·",
  "*rubs neck*": "ğŸ˜“",
  "*looks away*": "ğŸ˜³",
  "*avoids eye contact*": "ğŸ™ˆ",
  "*stares at floor*": "ğŸ˜",
  "*snaps fingers*": "ğŸ«°",
  "*cracks knuckles*": "ğŸ‘",
  "*takes deep breath*": "ğŸ˜®â€ğŸ’¨",
  "*exhales slowly*": "ğŸ˜¤",
  "*inhales sharply*": "ğŸ˜¯",
  "*trembles*": "ğŸ˜°",
  "*shivers*": "ğŸ¥¶",
  "*sweats*": "ğŸ˜“",
  "*starts sweating*": "ğŸ«£",
  "*gulps nervously*": "ğŸ˜°",
  "*chuckles*": "ğŸ˜„",
  "*chuckles darkly*": "ğŸ˜",
  "*mutters*": "ğŸ¤",
  "*mumbles*": "ğŸ˜¶",
  "*whispers*": "ğŸ¤«",
  "*yells*": "ğŸ—£ï¸",
  "*shouts*": "ğŸ“£",
  "*groans loudly*": "ğŸ˜©",
  "*screeches*": "ğŸ˜±",
  "*makes a face*": "ğŸ˜–",
  "*pulls a face*": "ğŸ˜",
  "*sticks out tongue*": "ğŸ˜›",
  "*winks*": "ğŸ˜‰",
  "*blows kiss*": "ğŸ˜˜",
  "*makes heart shape*": "â¤ï¸",
  "*crosses fingers*": "ğŸ¤",
  "*gestures wildly*": "ğŸ—¯ï¸",
  "*throws hands up*": "ğŸ˜¤",
  "*throws arms around*": "ğŸ¤—",
  "*hugs*": "ğŸ¤—",
  "*high fives*": "ğŸ™Œ",
  "*fist bumps*": "ğŸ‘Š",
  "*covers ears*": "ğŸ™‰",
  "*covers eyes*": "ğŸ™ˆ",
  "*covers mouth in shock*": "ğŸ˜®",
  "*looks proud*": "ğŸ˜Œ",
  "*beams*": "ğŸ˜„",
  "*glows with pride*": "ğŸ˜Œ",
  "*looks downcast*": "ğŸ˜¢",
  "*hangs head*": "ğŸ˜",
  "*chuckles awkwardly*": "ğŸ˜…",
  "*laughs maniacally*": "ğŸ˜ˆ",
  "*laughs evilly*": "ğŸ˜ˆ",
  "*cackles*": "ğŸ˜†",
  "*sighs deeply*": "ğŸ˜”",
  "*looks thoughtful*": "ğŸ¤”",
  "*ponders*": "ğŸ¤”",
  "*scratches chin*": "ğŸ¤¨",
  "*strokes beard*": "ğŸ§”",
  "*twirls hair*": "ğŸ’",
  "*tugs at sleeve*": "ğŸ§¥",
  "*adjusts glasses*": "ğŸ¤“",
  "*blinks*": "ğŸ˜",
  "*squints in disbelief*": "ğŸ˜‘",
  "*looks stunned*": "ğŸ˜²",
  "*shakes with rage*": "ğŸ˜¡",
  "*turns away*": "ğŸ˜ ",
  "*throws something*": "ğŸ’¢",
  "*slams fist*": "ğŸ‘Š",
  "*flips table*": "(â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»",
  
  // Additional expressions
  "*grovels*": "ğŸ™‡",
  "*pleads*": "ğŸ¥º",
  "*begs*": "ğŸ™",
  "*prays*": "ğŸ™",
  "*meditates*": "ğŸ§˜",
  "*zones out*": "ğŸ’¤",
  "*daydreams*": "ğŸ’­",
  "*spaces out*": "ğŸ˜¶â€ğŸŒ«ï¸",
  "*snaps out of it*": "ğŸ˜³",
  "*blanks out*": "ğŸ˜",
  "*looks bored*": "ğŸ˜’",
  "*taps fingers*": "ğŸ«°",
  "*drums fingers*": "ğŸ¥",
  "*bounces foot*": "ğŸ¦¶",
  "*clicks tongue*": "ğŸ˜¬",
  "*scoffs*": "ğŸ˜",
  "*chuckles dryly*": "ğŸ˜’",
  "*rolls shoulders*": "ğŸ§",
  "*cracks neck*": "ğŸ’¢",
  "*tilts head back*": "ğŸ˜¤",
  "*throws back head laughing*": "ğŸ˜‚",
  "*leans on wall*": "ğŸ§â€â™‚ï¸",
  "*leans over*": "ğŸ‘€",
  "*leans in close*": "ğŸ«£",
  "*backs away*": "ğŸ˜³",
  "*jumps back*": "ğŸ˜¨",
  "*flinches*": "ğŸ˜–",
  "*ducks*": "ğŸ™‡â€â™‚ï¸",
  "*peeks*": "ğŸ™ˆ",
  "*glances away*": "ğŸ˜¶",
  "*glances nervously*": "ğŸ˜¬",
  "*glances sideways*": "ğŸ‘€",
  "*stifles laugh*": "ğŸ˜†",
  "*snickers*": "ğŸ˜",
  "*chortles*": "ğŸ˜„",
  "*giggles uncontrollably*": "ğŸ¤­",
  "*wheezes*": "ğŸ˜¤",
  "*hyperventilates*": "ğŸ˜°",
  "*chokes*": "ğŸ˜µ",
  "*coughs nervously*": "ğŸ˜¬",
  "*holds breath*": "ğŸ˜¶",
  "*puffs cheeks*": "ğŸ˜—",
  "*blows out air*": "ğŸ˜¤",
  "*grits teeth*": "ğŸ˜£",
  "*bares teeth*": "ğŸ˜¬",
  "*snarls*": "ğŸ˜ ",
  "*growls*": "ğŸ˜¡",
  "*hisses*": "ğŸ˜¾",
  "*bares fangs*": "ğŸ˜ˆ",
  "*licks lips*": "ğŸ˜‹",
  "*puckers lips*": "ğŸ˜š",
  "*makes kissy face*": "ğŸ˜˜",
  "*squishes cheeks*": "ğŸ¥º",
  "*sticks out bottom lip*": "ğŸ˜¢",
  "*crosses fingers behind back*": "ğŸ¤",
  "*shakes fist*": "ğŸ‘Š",
  "*punches air*": "ğŸ¥Š",
  "*air kicks*": "ğŸ¦µ",
  "*does finger guns*": "ğŸ¤ ",
  "*salutes sarcastically*": "ğŸ˜",
  "*thumbs up sarcastically*": "ğŸ˜’",
  "*makes peace sign*": "âœŒï¸",
  "*flips hair*": "ğŸ’â€â™€ï¸",
  "*snaps fingers sassily*": "ğŸ§šâ€â™€ï¸",
  "*does twirl*": "ğŸ’ƒ",
  "*poses dramatically*": "ğŸ­",
  "*collapses dramatically*": "ğŸ˜©",
  "*lays down*": "ğŸ›Œ",
  "*faceplants*": "ğŸ¤•",
  "*bangs head on desk*": "ğŸ˜«",
  "*bangs head against wall*": "ğŸ˜©",
  "*slams door*": "ğŸšª",
  "*slams laptop shut*": "ğŸ’»",
  "*throws phone*": "ğŸ“±ğŸ’¥",
  "*screams into pillow*": "ğŸ˜«ğŸ›ï¸",
  "*melts into floor*": "ğŸ« ",
  "*vanishes*": "ğŸ«¥",
  "*evaporates*": "ğŸ’¨",
  "*floats away*": "ğŸˆ",
  "*ascends*": "â˜ï¸",
  "*descends into madness*": "ğŸ˜µâ€ğŸ’«",
  "*stares into void*": "ğŸŒ€",
  "*panics*": "ğŸ˜±",
  "*runs away*": "ğŸƒ",
  "*runs in circles*": "ğŸ”",
  "*spins*": "ğŸŒ€",
  "*teleports out*": "ğŸŒ€ğŸ’¨",
  "*appears suddenly*": "âœ¨",
  "*materializes*": "ğŸ’«",
  "*disappears in a puff*": "ğŸ’¨",
  "*fades away*": "ğŸŒ«ï¸",
  "*turns to dust*": "ğŸª¦",
  "*explodes*": "ğŸ’¥",
  "*implodes*": "ğŸ«¥",
  "*crashes*": "ğŸ’¥",
  "*freezes*": "ğŸ§Š",
  "*gets stuck*": "ğŸ§±",
  "*breaks down*": "ğŸ˜­",
  "*short circuits*": "ğŸ¤–ğŸ’¢",
  "*dies inside*": "ğŸ˜©",
  "*reboots*": "ğŸ”",
  "*glitches*": "ğŸ–¥ï¸",
  "*404s*": "âŒ",
  "*malfunctions*": "âš ï¸",
  
  // Even more expressions
  "*presses lips together*": "ğŸ˜¶",
  "*grins mischievously*": "ğŸ˜",
  "*twirls mustache*": "ğŸ§",
  "*looks innocent*": "ğŸ˜‡",
  "*pretends not to know*": "ğŸ¤¥",
  "*acts surprised*": "ğŸ˜²",
  "*acts offended*": "ğŸ˜¤",
  "*acts clueless*": "ğŸ˜¶",
  "*acts cool*": "ğŸ˜",
  "*acts dramatic*": "ğŸ­",
  "*acts suspicious*": "ğŸ•µï¸",
  "*side-eyes*": "ğŸ‘€",
  "*deadpans*": "ğŸ˜",
  "*monologues*": "ğŸ™ï¸",
  "*narrates*": "ğŸ“–",
  "*commentates*": "ğŸ¤",
  "*breaks fourth wall*": "ğŸª",
  "*narrates dramatically*": "ğŸ¬",
  "*voice cracks*": "ğŸ«¨",
  "*clears throat*": "ğŸ˜¬",
  "*stares at phone*": "ğŸ“±ğŸ‘€",
  "*checks clock again*": "â°ğŸ˜©",
  "*scrolls endlessly*": "ğŸ“±ğŸŒ€",
  "*accidentally likes post*": "ğŸ˜³â¤ï¸",
  "*wakes up late*": "â°ğŸ›Œ",
  "*forgets homework*": "ğŸ˜±ğŸ“š",
  "*runs out the door*": "ğŸƒğŸšª",
  "*misses ride*": "ğŸš—ğŸ’¨",
  "*brain goes brr*": "ğŸ§ ğŸ’¨",
  "*social battery dead*": "ğŸ”‹âŒ",
  "*forgets how to human*": "ğŸ¤–â“",
  "*wants to scream into void*": "ğŸ˜±ğŸŒŒ",
  "*doesn't even have energy to cry*": "ğŸ˜ğŸ’§",
  "*scrolls dead-eyed*": "ğŸ‘ï¸ğŸ“±",
  "*forgets what happiness feels like*": "ğŸ˜¶â€ğŸŒ«ï¸ğŸ« ",

  // Common text expressions
  "*sigh*": "ğŸ˜”",
  "*smile*": "ğŸ™‚",
  "*laugh*": "ğŸ˜‚",
  "*crying*": "ğŸ˜¢",
  "*blush*": "ğŸ˜Š",
  "*happy*": "ğŸ˜„",
  "*sad*": "ğŸ˜”",
  "*angry*": "ğŸ˜ ",
  "*confused*": "ğŸ˜•",
  "*shocked*": "ğŸ˜²",
  "*thumbs up*": "ğŸ‘",
  "*thumbs down*": "ğŸ‘",
  "*ok*": "ğŸ‘Œ",
  "*yes*": "âœ…",
  "*no*": "âŒ",
  "*hug*": "ğŸ¤—",
  "*wave*": "ğŸ‘‹",
  "*shrug*": "ğŸ¤·",
  "*eye roll*": "ğŸ™„",
  "*wink*": "ğŸ˜‰",
  "*facepalm*": "ğŸ¤¦",
};

// Function to replace text expressions with emojis
export function replaceExpressionsWithEmojis(text: string): string {
  let result = text;
  
  // First, handle the case where expressions are wrapped with asterisks
  for (const [expression, emoji] of Object.entries(expressionToEmojiMap)) {
    // Replace the exact expression (with asterisks)
    const regex = new RegExp(expression.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
    result = result.replace(regex, emoji);
  }
  
  return result;
}

// Function to preprocess user message to preserve emojis
export function preserveEmojis(text: string): string {
  return text; // Already preserved as-is since they're Unicode characters
}